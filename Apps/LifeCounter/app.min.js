"use strict";var version="2.0.0",va=1,vb=!1;function fa(n){return document.getElementById(n)}function fb(n){return document.getElementsByName(n)}function fc(n,t,e){var o="ERROR: "+n+"::"+t+": "+e;console.error(o),0<va&&alert(o)}function fd(n,t){return Math.floor(Math.random()*t+n)}function fe(n,t){return void 0!==n?n:t}function ff(n,t,e,o,f,i){var a=1,r=fe(o,100);t*=fe(f,.8),e*=fe(i,.8);var c=fa("HiddenResizer");for(c.innerHTML=n;1<r-a;){var p=parseInt((a+r)/2);c.style.fontSize=p+"px";var l=c.offsetWidth,d=c.offsetHeight;l<=t&&d<=e?a=p:r=p}return a}function fg(){this.dom=null,this.width=0,this.height=0}function fh(){this.app=null}function fi(){this.context={},this.canvas=new fg,this.views={},this.currentView=""}fg.prototype.add=function(n,t,e,o,f,i){f=fe(f,"div"),i=fe(i,null);var a=new fg,r=document.createElement(f);return null!=i&&r.setAttribute("id",i),this.dom.appendChild(r),a.dom=r,a.width=this.width*e,a.height=this.height*o,a.dom.style.position="absolute",a.dom.style.left=this.width*n+"px",a.dom.style.top=this.height*t+"px",a.dom.style.width=a.width+"px",a.dom.style.height=a.height+"px","input"==f&&(a.pd("focus",function(){vb=!0}),a.pd("blur",function(){setTimeout(function(){vb=!1},500)})),a},fg.prototype.pa=function(n){this.dom.style.background=n},fg.prototype.pb=function(n,t,e){var o=null;(t=fe(t,!1))?(e=fe(e,100),o=ff(n,this.width,this.height,e)):"undefined"!==e&&(o=e);var f=document.createTextNode(n);null!=o&&(this.dom.style.fontSize=o+"px"),this.dom.appendChild(f)},fg.prototype.pc=function(n){this.dom.className+=" "+n},fg.prototype.pd=function(n,t){this.dom.addEventListener(n,t)},fh.prototype.pe=function(){fc("ClassView","render","This method is not implemented!")},fh.prototype.pf=function(n){this.app=n},fi.prototype.pg=function(n,t){var e=this.views;return e.hasOwnProperty(t)?(fc("ClassApp","addView","View with name "+t+" already exists!"),!1):(e[t]=n,e[t].pf(this),!0)},fi.prototype.ph=function(n){this.views.hasOwnProperty(n)?(this.currentView=n,this.pe()):fc("ClassApp","toggleView","View called "+n+" does not exist!")},fi.prototype.pe=function(){var n=this.canvas;n.dom.innerHTML="",n.width=window.innerWidth,n.height=window.innerHeight,n.dom.style.position="absolute",n.dom.style.width=n.width+"px",n.dom.style.height=n.height+"px",this.views[this.currentView].pe()},fi.prototype.pf=function(n){this.canvas.dom=fa(n);var t=this;window.addEventListener("resize",function(){vb||(fs(),t.pe())})};var vc=fm;function fj(){var n=this.app.canvas;fI(n,vl.whoStarts),fk(fJ(n)),fH(n,[new fF(vl.throwDice,function(){vc=fm,fl()}),new fF(vl.tossCoin,function(){vc=fn,fl()}),new fF(vl.back,function(){app.ph(0)})],"a")}function fk(n){n.pd("click",function(){fl()});var t=n.add(0,0,1,1,"div","b"),e=ft(t,1,1,"⚀⚀⚀","c",Math.min(n.width,n.height));t.pb("??",!1,e)}function fl(){fa("b").innerHTML="...",setTimeout(function(){vc()},500)}function fm(){var n=["⚀","⚁","⚂","⚃","⚄","⚅"],t=fa("b");t.innerHTML="";for(var e=0;e<3;e++)t.innerHTML+=n[fd(1,6)-1]}function fn(){var n=[vl.coin1,vl.coin2];fa("b").innerHTML=n[fd(1,2)-1]}function fo(){this.score=0,this.subscore=0,this.color="red"}function fp(n){var t="0"+String(n%60);return("0"+String(Math.floor(n/60))).slice(-2)+":"+t.slice(-2)}function fq(n,t){return n.length>t.length?n:t}function fr(n){return clearInterval(n),null}var vd={};function fs(){vd={}}function ft(n,t,e,o,f,i){var a=fe(i,100);return null==vd[f]&&(vd[f]=ff(o,n.width*t,n.height*e,a)),vd[f]}var app=new fi;function Main(){app.pf("Canvas"),app.context.players=[],app.context.initScore=0,app.context.numOfPlayers=4,app.context.colorSetup=[0,1,2,3,4,5],app.context.initCountdown=30,app.context.countdown=0,app.context.cntIntHndl=null;for(var n=0;n<app.context.numOfPlayers;n++)app.context.players.push(new fo),app.context.players[n].score=app.context.initScore,app.context.players[n].color=Colors[app.context.colorSetup[n]];var t=[{callback:fu,name:0},{callback:fy,name:1},{callback:fK,name:2},{callback:fO,name:3},{callback:fj,name:4}];for(n=0;n<t.length;n++){var e=new fh;e.pe=t[n].callback,app.pg(e,t[n].name)}app.ph(0)}function fu(){var n=this.app.canvas,t=fJ(n,!1);t.dom.className="",fv(t,this.app),fH(n,[new fF(vl.whoStarts,function(){app.ph(4)}),new fF(vl.timer,function(){app.ph(2)}),new fF(vl.settings,function(){app.ph(1)})],"d")}function fv(n,t){for(var e=t.context.players.length,o=2==e?1:2,f=Math.ceil(e/o),i=1/o,a=1/f,r=0,c=0;c<f;c++)for(var p=0;p<o;p++){e%2==1&&r+1==e&&(i=1);var l=n.add(p*i,c*a,i,a);if(l.pa(t.context.players[r].color),fw(r,l,t),e==++r)return}}function fw(n,t,e){var o=ft(t,.25,1,"XX","e",250);t.add(.25,0,.5,1,"div","f"+n).dom.style.fontSize=o+"px";var f=t.add(0,0,.25,1,"button");f.pb("−",!1,o),f.pd("click",function(){fx(e.context.players,n,-1)}),f.pc("score_btn");var i=t.add(.75,0,.25,1,"button");i.pb("+",!1,o),i.pd("click",function(){fx(e.context.players,n,1)}),i.pc("score_btn"),fx(e.context.players,n,e.context.players[n].score,!0)}function fx(n,t,e,o){o=fe(o,!1);n[t].score=(o?0:parseInt(n[t].score))+e,fa("f"+t).innerHTML=n[t].score}var ve=2,vf=6,Colors=["red","lightgreen","lightblue","yellow","pink","orange","grey","#f5f5f5"],vg=4,vh=[0,1,2,3,4,5],vi=0;function fy(){var n=this.app.canvas;fI(n,vl.settings),fz(fJ(n),app),fH(n,[new fF(vl.apply,function(){fA(app),app.ph(0)}),new fF(vl.back,function(){fB(app),app.ph(0)})],"g")}function fz(n,t){for(var e=[vl.plCount,vl.initScore],o=ft(n,.6,.1,fq(e[0],e[1]),"h"),f=0;f<e.length;f++){var i=n.add(0,.1*f,.6,.1);i.pc("align_left"),i.pb(e[f],!1,o)}var a=n.add(0,1/9*2,1,1/9);a.dom.style.fontWeight="bold",a.pb(vl.plColors,!1,o),fC(n.add(.6,0,.4,.1,"select"),t),fD(n.add(.6,.1,.4,.1,"input","i"),t),fE(n.add(0,1/9*3,1,1/9*6),t)}function fA(n){var t=n.context,e=t.players;for(t.numOfPlayers=vg;t.numOfPlayers<e.length;)e.pop();for(;t.numOfPlayers>e.length;)e.push(new fo);for(var o=0;o<e.length;o++)t.colorSetup[o]=vh[o],e[o].color=Colors[vh[o]],e[o].score=parseInt(vi);t.initScore=parseInt(vi)}function fB(n){var t=n.context;vg=t.numOfPlayers;for(var e=0;e<vf;e++)vh[e]=t.colorSetup[e];vi=t.initScore}function fC(e,o){for(var f=ve;f<=vf;f++)!function(n){var t=e.add(0,0,1,1,"option");t.value=f,t.pb(f),t.pd("click",function(){vg=n,o.ph(1)}),n==vg&&(t.dom.selected="selected")}(f)}function fD(n,t){n.dom.type="number",n.dom.value=vi,n.pd("input",function(){n.dom.validity.valid&&(vi=n.dom.value)}),n.dom.autocomplete="off"}function fE(f,n){for(var i=1/Colors.length,a=1/vf,t=0;t<vg;t++)for(var e=0;e<Colors.length;e++)!function(n,t){var e=f.add(t*i,n*a,i,a);e.pa(Colors[t]);var o="";vh[n]==t&&(o="checked"),e.dom.innerHTML='<input type="radio" name="j'+n+'" value="'+t+'" '+o+">",e.pd("click",function(){vh[n]=t})}(t,e)}var vj=.0807,vk=vj;function fF(n,t,e){this.label=n,this.action=t,this.id=fe(e,null)}function fG(n,t,e,o,f,i,a){var r,c,p=f/t.length;if(null==vd[a]){for(var l="",d=0;d<t.length;d++)l=fq(l,t[d].label);vd[a]=ff(l,n.width*p,n.height*i)}for(d=0;d<t.length;d++)null!=t[d]&&(r=d,c=void 0,(c=n.add(e+d*p,o,p,i,"button",t[r].id)).pd("click",t[r].action),c.pb(t[r].label,!1,vd[a]),0<d&&c.pc("button_separator"))}function fH(n,t,e){var o=n.add(0,1-vk,1,vk);o.pc("toolbar"),fG(o,t,0,0,1,1,e)}function fI(n,t){var e=n.add(0,0,1,vj);null==vd.k&&(vd.k=ff(t,e.width,e.height)),e.pb(t,!1,vd.k),e.pc("header")}function fJ(n,t){var e=fe(t,!0)?vj:0,o=n.add(0,e,1,1-e-vk);return o.pc("content"),o}var vl={whoStarts:"Kdo začne?",throwDice:"Hoď kostkami",tossCoin:"Hoď mincí",apply:"Použít",back:"Zpět",coin1:"Hlava",coin2:"Orel",settings:"Nastavení",timer:"Nezdržuj",initScore:"Počáteční skóre",plCount:"Počet hráčů",plColors:"Barvy hráčů",countdown:"Odpočet",play:"▷",pause:"❘ ❘",stop:"◻",restart:"⟲",end:"KONEC"},vm=null;function fK(){var n=this.app.canvas;fI(n,vl.countdown),fL(fJ(n),this.app),fH(n,[new fF(vl.settings,function(){fN(app,5),app.ph(3)}),new fF(vl.back,function(){fN(app,5),app.ph(0)})],"l")}function fL(n,t){var e=t.context;e.countdown=e.initCountdown;var o=ft(n,1,.4,"XX:XX","m",250),f=n.add(0,0,1,.4,"div","n");f.dom.style.fontSize=o+"px",f.pb(fp(e.initCountdown)),fG(n,[new fF(vl.play,function(){fM(),fN(t,6)},"o"),new fF(vl.stop,function(){fN(t,5)}),new fF(vl.restart,function(){fN(t,7)})],0,.4,1,.1,"p")}function fM(){if(null===vm){var n=fR(0,.1);(vm=new Audio(n)).play()}}function fN(n,t){var e=n.context,o=fa("n");if(6==t){if(null!=e.cntIntHndl)return e.cntIntHndl=fr(e.cntIntHndl),void(fa("o").innerHTML=vl.play);0==e.countdown&&fN(n,5),fa("o").innerHTML=vl.pause,e.cntIntHndl=setInterval(function(){e.countdown--,o.innerHTML=fp(e.countdown),0==e.countdown&&(e.cntIntHndl=fr(e.cntIntHndl),vm.src=fR(440,2),vm.play(),o.innerHTML=vl.end,fa("o").innerHTML=vl.play)},1e3)}else 5==t?(e.cntIntHndl=fr(e.cntIntHndl),e.countdown=e.initCountdown,o.innerHTML=fp(e.countdown),fa("o").innerHTML=vl.play):7==t?(fN(n,5),fN(n,6)):fc("Timer","CountdownControl","Invalid action name: "+t)}var vn=null;function fO(){var n=this.app.canvas;vn=this.app.context.initCountdown,fI(n,vl.settings),fP(fJ(n),this.app),fH(n,[new fF(vl.apply,function(){app.context.initCountdown=vn,app.ph(2)}),new fF(vl.back,function(){app.ph(2)})],"q")}function fP(n,t){var e=ft(n,1,.4,"XX:XX","r",250),o=n.add(0,0,1,.4,"div","s");o.dom.style.fontSize=e+"px",o.pb("00:00"),fG(n,[new fF("-10",function(){fQ(t,-10)}),new fF("-5",function(){fQ(t,-5)}),new fF("-1",function(){fQ(t,-1)}),new fF("+1",function(){fQ(t,1)}),new fF("+5",function(){fQ(t,5)}),new fF("+10",function(){fQ(t,10)})],0,.4,1,.1,"t"),fQ(t,0)}function fQ(n,t){vn+t<=0?vn=1:vn+=t,fa("s").innerHTML=fp(vn)}function fR(n,t){for(var e=22050,o=new Uint8Array(t*e),f=e/n,i=0;i<o.length;i++)o[i]=126*Math.sin(2*i*Math.PI/f)+128;var a=["RIFF",fS(1,52),"WAVEfmt ",fS(1,16),fS(0,1),fS(0,1),fS(1,e),fS(1,22050),fS(0,1),fS(0,8),"data",fS(1,1*o.length*8/8),o],r=new window.Blob(a,{type:"audio/wav"});return(window.URL||window.webkitURL).createObjectURL(r)}function fS(n,t){return[new Uint8Array([t,t>>8]),new Uint8Array([t,t>>8,t>>16,t>>24])][n]}