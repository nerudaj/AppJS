"use strict";var version="2.0.0",va=1,vb=!1,vc={};function fa(){vc={}}function fb(t){return document.getElementById(t)}function fc(t){return document.getElementsByName(t)}function fd(t,e,n){var i="ERROR: "+t+"::"+e+": "+n;console.error(i),0<va&&alert(i)}function fe(t,e){return Math.floor(Math.random()*e+t)}function ff(t,e){return void 0!==t?t:e}function fg(t,e,n,i,o,f){var r=1,a=ff(i,100);e*=ff(o,.8),n*=ff(f,.8);var s=fb("HiddenResizer");for(s.innerHTML=t;1<a-r;){var d=parseInt((r+a)/2);s.style.fontSize=d+"px";var h=s.offsetWidth,p=s.offsetHeight;h<=e&&p<=n?r=d:a=d}return r}function fh(){this.dom=null,this.width=0,this.height=0}function fi(){this.app=null}function fj(){this.context={},this.canvas=new fh,this.views={},this.currentView=""}fh.prototype.add=function(t,e,n,i,o,f){o=ff(o,"div"),f=ff(f,null);var r=new fh,a=document.createElement(o);return null!=f&&a.setAttribute("id",f),this.dom.appendChild(a),r.dom=a,r.width=this.width*n,r.height=this.height*i,r.dom.style.position="absolute",r.dom.style.left=this.width*t+"px",r.dom.style.top=this.height*e+"px",r.dom.style.width=r.width+"px",r.dom.style.height=r.height+"px","input"!=o&&"textarea"!=o||(r.pe("focus",function(){vb=!0}),r.pe("blur",function(){setTimeout(function(){vb=!1},500)})),r},fh.prototype.pa=function(t){this.dom.style.background=t},fh.prototype.pb=function(t,e,n){var i=null;(e=ff(e,!1))?(n=ff(n,100),i=fg(t,this.width,this.height,n)):"undefined"!==n&&(i=n);var o=document.createTextNode(t);null!=i&&(this.dom.style.fontSize=i+"px"),this.dom.appendChild(o)},fh.prototype.pc=function(t,e,n){var i=null;(e=ff(e,!1))?(n=ff(n,100),i=fg(t,this.width,this.height,n,1,1)):"undefined"!==n&&(i=n),null!=i&&(this.dom.style.fontSize=i+"px"),this.dom.innerHTML=t},fh.prototype.pd=function(t){this.dom.className+=" "+t},fh.prototype.pe=function(t,e){this.dom.addEventListener(t,e)},fi.prototype.pf=function(){fd("ClassView","render","This method is not implemented!")},fi.prototype.pg=function(t){this.app=t},fj.prototype.ph=function(t,e){var n=this.views;return n.hasOwnProperty(e)?(fd("ClassApp","addView","View with name "+e+" already exists!"),!1):(n[e]=t,n[e].pg(this),!0)},fj.prototype.pi=function(t){this.views.hasOwnProperty(t)?(this.currentView=t,this.pf()):fd("ClassApp","toggleView","View called "+t+" does not exist!")},fj.prototype.pf=function(){var t=this.canvas;t.dom.innerHTML="",t.width=window.innerWidth,t.height=window.innerHeight,t.dom.style.position="absolute",t.dom.style.width=t.width+"px",t.dom.style.height=t.height+"px",this.views[this.currentView].pf()},fj.prototype.pg=function(t){this.canvas.dom=fb(t);var e=this;window.addEventListener("resize",function(){vb||(fa(),e.pf())})};var vd=["Collecting","Cooperation","Driving","Evasion","Exploration","Guessing","Lives","Looting","Pattern matching","Reflexes","Resource management","Role playing","Score","Shooting","Swapping","Tile placement"],ve=["Card","Cube","Death is not game over","Dice","Hexes","No enemies","No points","One button","Quests"];function fk(){var t=this.app,e=t.context,n=t.canvas;fx(n,"Timer 05:00");var i=fy(n);-1==e.pattern&&(e.pattern=fl(vd),e.restrict=fl(ve),e.mod=fl(vd.concat(ve))),fm(i,0,"Pattern:",e.pattern),fm(i,.1,"Restriction:",e.restrict),fm(i,.2,"Modifier:",e.mod);var o=i.add(.05,.35,.9,.6,"textarea","a");o.pe("keyup",function(){e.pitch=fb("a").value}),o.dom.value=e.pitch,o.dom.style.resize="none",o.dom.style.outline="none",o.dom.style.background="rgb(31, 31, 31)",o.dom.style.color="rgb(176, 176, 176)",o.dom.style.border="1px solid rgb(176, 176, 176)",fw(n,[new fu("Submit",function(){}),new fu("Back",function(){fp(t),t.pi(0)})],"b"),null==e.handle&&fn(t)}function fl(t){return t[fe(0,t.length)]}function fm(t,e,n,i){t.add(0,e,.4,.1).pb(n,!0),t.add(.4,e,.6,.1).pb(i,!0)}function fn(t){var e=t.context;e.timer=300,e.handle=setInterval(function(){fo(t)},1e3)}function fo(t){var e=t.context;if(e.timer--,0==e.timer)return fb("c").innerHTML="END!",void fp(t);fq(e.timer)}function fp(t){var e=t.context;clearInterval(e.handle),e.handle=null}function fq(t){var e="0"+String(t%60),n="0"+String(Math.floor(t/60));fb("c").innerHTML="Timer: "+n.slice(-2)+":"+e.slice(-2)}var app=new fj;function fr(t){t.handle=null,t.timer=0,t.pitch="",t.pattern=-1,t.restrict=-1,t.mod=-1}function Main(){app.pg("Canvas"),fr(app.context);for(var t=[{callback:fs,name:0},{callback:fk,name:1}],e=0;e<t.length;e++){var n=new fi;n.pf=t[e].callback,app.ph(n,t[e].name)}app.pi(0)}function fs(){var t=this.app.canvas;fx(t,"5 Minute Game Design Jam"),fy(t).pc("Welcome to 5 Minute Game Design Jam!<br>Can you make a pitch of a game in 5 minutes? Let's see...<br><br>Rules: you must use the required design pattern and somehow conform to chosen restriction. You can spice up things with optional modifier.",!0),fw(t,[new fu("Start the challenge",function(){fr(app.context),app.pi(1)})],"b")}var vf=.0807,vg=vf;function ft(t,e){return t.length>e.length?t:e}function fu(t,e,n){this.label=t,this.action=e,this.id=ff(n,null)}function fv(t,e,n,i,o,f,r){var a,s,d=o/e.length;if(null==vc[r]){for(var h="",p=0;p<e.length;p++)h=ft(h,e[p].label);vc[r]=fg(h,t.width*d,t.height*f)}for(p=0;p<e.length;p++)null!=e[p]&&(a=p,s=void 0,(s=t.add(n+p*d,i,d,f,"button",e[a].id)).pe("click",e[a].action),s.pb(e[a].label,!1,vc[r]),0<p&&s.pd("button_separator"))}function fw(t,e,n){var i=t.add(0,1-vg,1,vg);i.pd("toolbar"),fv(i,e,0,0,1,1,n)}function fx(t,e){var n=t.add(0,0,1,vf,"div","c");null==vc.d&&(vc.d=fg(e,n.width,n.height)),n.pb(e,!1,vc.d),n.pd("header")}function fy(t,e){var n=ff(e,!0)?vf:0,i=t.add(0,n,1,1-n-vg);return i.pd("content"),i}